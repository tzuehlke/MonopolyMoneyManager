namespace MonopolyMoneyManager.Pages
{
using System.Collections.Generic;
using System.Threading.Tasks;
//using System.Text;
using System;
//using Microsoft.AspNetCore.Components.WebAssembly.Hosting;
//using TestBlazorWebAss.BusinessController;
using MonopolyMoneyManager.BusinessController;
using MonopolyMoneyManager.BusinessObjects;
using Microsoft.JSInterop;

    public partial class DirectLink
    {
        public string Link {get;set;}
        public string Linktext {get;set;}
        /*protected override async Task OnInitializedAsync()
        {
            
        }*/
        public void GenerateLink(){
            Console.WriteLine("Generating Direct Link...");
            var cu = new UriBuilder(NavigationManager.Uri);
            string newuri = cu.Scheme+"://"+cu.Host+":"+cu.Port+"/monopoly/"+currentGamers.GetStateAsJSON();
            Link = newuri;
            Linktext = "MMM "+DateTime.Now.ToShortDateString()+" "+DateTime.Now.ToLongTimeString();
            StateHasChanged();
        }
   }
}